{% extends "base.html" %} {% block main_content %}
    <main>
        <div class="list-page">
            <div>
                <h1 class="list-page-header">My Tasks</h1>
            </div>
            <div>
                {% if tasks|length > 0 %}
                <table class="task-table">
                    <thead>
                        <th class="task-head">Name</th>
                        <th class="task-head">Project</th>
                        <th class="task-head">Start Date</th>
                        <th class="task-head">Due Date</th>
                        <th class="task-head">Completed?</th>
                    </thead>
                    <tbody>
                        {% for task in tasks %}
                            <tr>
                                {% if task.is_completed == False %}
                                <td class="task-data">{{ task.name }}</td>
                                <td class="task-data"><a href="{% url "show_project" task.project.pk %}"> {{ task.project.name }}</a></td>
                                <td class="task-data">{{ task.start_date }}</td>
                                <td class="task-data">{{ task.due_date }}</td>
                                <td class="task-data">
                                        <form class="completed_task" method="post" action="{% url "complete_task" task.id%}">
                                            {% csrf_token %}
                                            <input type="hidden" name="is_completed" value="True">
                                            <button class="completed-button"><i class="fa-solid fa-square-check icon"></i></button>
                                        </form>
                                    {% endif %}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% else %}
                <p>You have no tasks</p>
                {% endif %}
            </div>
            <div class="completed-tasks">
                <h1 class="list-page-header">Completed Tasks</h1>
                <table class="task-table completed-tasks">
                    <thead class="completed-tasks">
                        <th class="task-head completed-tasks">Task Name</th>
                        <th class="task-head completed-tasks project-name">Project Name</th>
                    </thead>
                    <tbody class="completed-tasks">
                        {% for task in tasks %}
                        {% if task.is_completed %}
                        <tr>
                            <td class="task-data">{{ task.name }}</td>
                            <td class="task-data">{{ task.project.name }}</td>
                        </tr>
                        {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </main>

{% endblock main_content %}
